<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ocean Horizon</title>
  <link rel="stylesheet" href="style.css" />

  <!-- ═══════════════════════════════════════════════════════════════
       GLSL SHADERS  (type is unrecognised by the browser so the
       content is never executed — we read it as text in script.js)
  ═══════════════════════════════════════════════════════════════ -->

  <script id="vert-shader" type="x-shader/x-vertex">
    attribute vec2 a_pos;
    void main() {
      gl_Position = vec4(a_pos, 0.0, 1.0);
    }
  </script>

  <script id="frag-shader" type="x-shader/x-fragment">
    precision highp float;

    uniform float u_time;       /* seconds since page load               */
    uniform float u_speed;      /* scroll velocity, clamped 0–1          */
    uniform vec2  u_resolution; /* canvas pixel dimensions               */

    /* ── Simplex 2-D Noise (Gustavson / McEwan) ─────────────────── */
    vec3 mod289v3(vec3 x){ return x - floor(x*(1./289.))*289.; }
    vec2 mod289v2(vec2 x){ return x - floor(x*(1./289.))*289.; }
    vec3 permute(vec3 x){ return mod289v3(((x*34.)+1.)*x); }

    float snoise(vec2 v) {
      const vec4 C = vec4( 0.211324865405187,  0.366025403784439,
                          -0.577350269189626,  0.024390243902439);
      vec2 i  = floor(v + dot(v, C.yy));
      vec2 x0 = v - i + dot(i, C.xx);
      vec2 i1  = (x0.x > x0.y) ? vec2(1.,0.) : vec2(0.,1.);
      vec4 x12 = x0.xyxy + C.xxzz;
      x12.xy  -= i1;
      i = mod289v2(i);
      vec3 p = permute(permute(i.y + vec3(0.,i1.y,1.))
                               + i.x + vec3(0.,i1.x,1.));
      vec3 m = max(.5 - vec3(dot(x0,x0),
                             dot(x12.xy,x12.xy),
                             dot(x12.zw,x12.zw)), 0.);
      m = m * m;
      m = m * m;
      vec3 x  = 2.*fract(p*C.www) - 1.;
      vec3 h  = abs(x) - .5;
      vec3 ox = floor(x + .5);
      vec3 a0 = x - ox;
      m *= 1.79284291400159 - 0.85373472095314*(a0*a0 + h*h);
      vec3 g;
      g.x  = a0.x *x0.x   + h.x *x0.y;
      g.yz = a0.yz*x12.xz + h.yz*x12.yw;
      return 130. * dot(m, g);
    }

    /* ── Main ────────────────────────────────────────────────────── */
    void main() {
      vec2 uv = gl_FragCoord.xy / u_resolution.xy;
      float aspect = u_resolution.x / u_resolution.y;
      vec2 p = vec2(uv.x * aspect, uv.y);

      /* ── Scroll-driven energy: swirls intensify as tide rises ── */
      float energy = 0.08 + u_speed * 0.22;
      float t = u_time * energy;

      /* ═══════════════════════════════════════════════════════════
         FLOW MAP  —  two-phase cycling prevents texture stretching.
         The flow field is built from noise-derived angles so the
         entity swirls organically rather than translating linearly.
      ═══════════════════════════════════════════════════════════ */
      float cycle = mod(u_time * 0.04, 1.0);
      float phase = abs(2.0 * cycle - 1.0);   /* 0→1→0 triangle wave */

      vec2 flow1 = vec2(
        snoise(p * 0.65 + t * 0.11),
        snoise(p * 0.65 + vec2(7.3, 2.1) + t * 0.09)
      );
      vec2 flow2 = vec2(
        snoise(p * 0.65 + vec2(3.7, 11.2) + t * 0.11),
        snoise(p * 0.65 + vec2(13.1, 5.9) + t * 0.09)
      );
      vec2 flow = mix(flow1, flow2, phase);

      /* Swirl harder near the bottom-left (cliff base)            */
      float cliffDist  = length(uv - vec2(0.15, 0.20));
      float swirlMask  = smoothstep(0.65, 0.08, cliffDist);
      float flowStr    = 0.11 + swirlMask * 0.14 + u_speed * 0.07;

      vec2 advP = p + flow * flowStr;

      /* ═══════════════════════════════════════════════════════════
         MULTI-OCTAVE NOISE FIELD (4 octaves, fBm-style)
      ═══════════════════════════════════════════════════════════ */
      float n = 0.0;
      n += snoise(advP * 2.2  + t * 0.24)                        * 0.500;
      n += snoise(advP * 4.4  + t * 0.18 + vec2(5.2, 1.3))      * 0.250;
      n += snoise(advP * 8.8  + t * 0.13 + vec2(9.7, 3.1))      * 0.125;
      n += snoise(advP * 17.6 + t * 0.09)                        * 0.0625;
      n = n * 0.5 + 0.5;               /* remap –0.9375…+0.9375 → ~0…1 */

      /* ═══════════════════════════════════════════════════════════
         TOPOGRAPHIC / ISOHYPSE CONTOUR LINES
         Quantise the noise into "elevation bands" so the surface
         reads like glowing topo-lines of swirling liquid ink.
      ═══════════════════════════════════════════════════════════ */
      float levels    = 14.0 + u_speed * 8.0;
      float contourV  = n * levels;

      /* Triangle wave: sharp peak at each integer iso-level       */
      float topo      = abs(fract(contourV) - 0.5) * 2.0;

      /* Crisp line where topo ≈ 0 (integer crossing)              */
      float lineW     = 0.045 + u_speed * 0.025;
      float line      = 1.0 - smoothstep(0.0, lineW, topo);

      /* Broader glow halo around lines                            */
      float glowW     = 0.18;
      float glow      = (1.0 - smoothstep(0.0, glowW, topo)) * 0.35;

      /* ═══════════════════════════════════════════════════════════
         IRIDESCENCE / CHROMATIC ABERRATION
         Offset the contour threshold for R and B channels so the
         edges of every ripple shimmer between deep cyan and bright
         aquamarine — an "oil-slick on dark water" effect.
      ═══════════════════════════════════════════════════════════ */
      float aberr     = 0.22 + u_speed * 0.15;

      float topo_r    = abs(fract(contourV + aberr) - 0.5) * 2.0;
      float topo_b    = abs(fract(contourV - aberr) - 0.5) * 2.0;
      float line_r    = 1.0 - smoothstep(0.0, lineW, topo_r);
      float line_b    = 1.0 - smoothstep(0.0, lineW, topo_b);

      /* ═══════════════════════════════════════════════════════════
         COLOUR COMPOSITION
      ═══════════════════════════════════════════════════════════ */

      /* Base: deep indigo void                                    */
      vec3 voidCol      = vec3(0.02, 0.03, 0.12);

      /* Teal palette for lines                                    */
      vec3 deepCyan     = vec3(0.00, 0.48, 0.56);
      vec3 brightAqua   = vec3(0.06, 0.88, 0.72);
      vec3 paleHighlight = vec3(0.22, 1.00, 0.86);

      /* Colour varies with the underlying noise value             */
      float colorMix    = smoothstep(0.30, 0.70, n);
      vec3  lineCol     = mix(deepCyan, brightAqua, colorMix);

      /* Assemble: start from void, add glow, then lines           */
      vec3 color = voidCol;

      /* Broad glow halo (uniform teal, no aberration)             */
      color += deepCyan * 0.32 * glow;

      /* Main contour lines with per-channel chromatic split       */
      color.r += lineCol.r * 0.65 * line_r;
      color.g += lineCol.g * 1.00 * line;
      color.b += lineCol.b * 1.15 * line_b;

      /* ── Caustic sparkle highlights on the brightest lines ──── */
      float caustic = snoise(advP * 24.0 + t * 0.55);
      caustic = pow(max(caustic, 0.0), 5.0) * 0.75;
      color += paleHighlight * caustic * (line * 0.7 + glow * 0.2);

      /* ── Extra swirl brightness near cliff base ──────────────── */
      float swirlGlow = snoise(advP * 3.2 + t * 0.38) * swirlMask;
      color += brightAqua * max(swirlGlow, 0.0) * 0.28;

      /* ── Secondary fine contours (half-frequency detail) ─────── */
      float fineTopo = abs(fract(contourV * 0.5 + 0.25) - 0.5) * 2.0;
      float fineLine = 1.0 - smoothstep(0.0, 0.03, fineTopo);
      color += deepCyan * 0.18 * fineLine;

      /* ── Radial vignette ── */
      vec2  vp   = uv - 0.5;
      float vign = 1.0 - dot(vp, vp) * 1.1;
      color *= clamp(vign, 0.0, 1.0);

      /* ── Soft top-fade so ocean blends into sky layer ────────── */
      float topFade = smoothstep(0.0, 0.30, uv.y);
      color *= topFade;

      gl_FragColor = vec4(color, 1.0);
    }
  </script>
</head>
<body>

  <!-- ── Nav (always on top) ─────────────────────────────────────── -->
  <nav class="nav">
    <div class="nav-logo">Ocean Horizon</div>
    <div class="nav-links">
      <a href="#">Explore</a>
      <a href="#">Gallery</a>
      <a href="#">Journey</a>
      <a href="#">Contact</a>
    </div>
  </nav>

  <!-- ── Layer 1 : Sky (fixed background) ────────────────────────── -->
  <div id="sky"></div>

  <!-- ── Layer 2 : Ocean Entity (WebGL canvas, rises on scroll) ──── -->
  <canvas id="ocean"></canvas>

  <!-- ── Layer 3 : Cliffs foreground (fixed, PNG with transparency)  -->
  <div id="cliffs"></div>

  <!-- ── Scroll driver  ──────────────────────────────────────────── -->
  <!--   This block creates the scroll room. The fixed layers react
         to scrollY while this element flows normally in the document. -->
  <div class="scroll-driver">
    <div class="hero-content">
      <h1>Where Sky<br>Meets Sea</h1>
      <p>Discover the endless horizon</p>
      <span class="scroll-hint">
        Scroll to reveal
        <span class="scroll-line"></span>
      </span>
    </div>
  </div>

  <!-- ── Content sections ────────────────────────────────────────── -->
  <main class="content">
    <section class="section-intro">
      <h2>The Endless Horizon</h2>
      <p>Where turquoise waters kiss ancient cliffsides and the wind carries
         the scent of salt and pine. A place where time slows and the soul
         breathes freely.</p>
    </section>

    <div class="card-row">
      <div class="card">
        <div class="card-icon">&#9875;</div>
        <h3>Set Sail</h3>
        <p>Chart a course through pristine waters, guided by the stars and
           the rhythm of the tide.</p>
      </div>
      <div class="card">
        <div class="card-icon">&#9968;</div>
        <h3>Clifftop Trails</h3>
        <p>Wind through ancient forests where wildflowers cling to rocky
           outcrops above the sea.</p>
      </div>
      <div class="card">
        <div class="card-icon">&#9728;</div>
        <h3>Open Skies</h3>
        <p>Watch as golden light dances across the waves, painting the world
           in endless wonder.</p>
      </div>
    </div>

    <button class="cta-btn">Begin the Journey</button>
  </main>

  <footer>
    &copy; 2026 Ocean Horizon &nbsp;&bull;&nbsp; Where the sea calls you home
  </footer>

  <script src="script.js"></script>
</body>
</html>
