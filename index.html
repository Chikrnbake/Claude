<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ocean Horizon</title>
  <link rel="stylesheet" href="style.css" />

  <!-- ═══════════════════════════════════════════════════════════════
       GLSL SHADERS  (type is unrecognised by the browser so the
       content is never executed — we read it as text in script.js)
  ═══════════════════════════════════════════════════════════════ -->

  <script id="vert-shader" type="x-shader/x-vertex">
    attribute vec2 a_pos;
    void main() {
      gl_Position = vec4(a_pos, 0.0, 1.0);
    }
  </script>

  <script id="frag-shader" type="x-shader/x-fragment">
    precision highp float;

    uniform float u_time;       /* seconds since page load               */
    uniform float u_speed;      /* scroll velocity, clamped 0–1          */
    uniform vec2  u_resolution; /* canvas pixel dimensions               */

    /* ── Simplex 2-D Noise (Gustavson / McEwan) ─────────────────── */
    vec3 mod289v3(vec3 x){ return x - floor(x*(1./289.))*289.; }
    vec2 mod289v2(vec2 x){ return x - floor(x*(1./289.))*289.; }
    vec3 permute(vec3 x){ return mod289v3(((x*34.)+1.)*x); }

    float snoise(vec2 v) {
      const vec4 C = vec4( 0.211324865405187,  0.366025403784439,
                          -0.577350269189626,  0.024390243902439);
      vec2 i  = floor(v + dot(v, C.yy));
      vec2 x0 = v - i + dot(i, C.xx);
      vec2 i1  = (x0.x > x0.y) ? vec2(1.,0.) : vec2(0.,1.);
      vec4 x12 = x0.xyxy + C.xxzz;
      x12.xy  -= i1;
      i = mod289v2(i);
      vec3 p = permute(permute(i.y + vec3(0.,i1.y,1.))
                               + i.x + vec3(0.,i1.x,1.));
      vec3 m = max(.5 - vec3(dot(x0,x0),
                             dot(x12.xy,x12.xy),
                             dot(x12.zw,x12.zw)), 0.);
      m = m * m;
      m = m * m;
      vec3 x  = 2.*fract(p*C.www) - 1.;
      vec3 h  = abs(x) - .5;
      vec3 ox = floor(x + .5);
      vec3 a0 = x - ox;
      m *= 1.79284291400159 - 0.85373472095314*(a0*a0 + h*h);
      vec3 g;
      g.x  = a0.x *x0.x   + h.x *x0.y;
      g.yz = a0.yz*x12.xz + h.yz*x12.yw;
      return 130. * dot(m, g);
    }

    /* ── 5-stop ocean colour palette ────────────────────────────── */
    vec3 oceanColor(float t) {
      t = clamp(t, 0., 1.);
      vec3 c0 = vec3(0.03, 0.04, 0.16); /* deep void indigo          */
      vec3 c1 = vec3(0.04, 0.13, 0.30); /* dark navy-indigo          */
      vec3 c2 = vec3(0.04, 0.34, 0.44); /* dark teal                 */
      vec3 c3 = vec3(0.06, 0.58, 0.56); /* mid bright teal           */
      vec3 c4 = vec3(0.15, 0.84, 0.75); /* pale cyan-teal (surface)  */
      float s = t * 4.;
      float f = smoothstep(0., 1., fract(s));
      vec3 ca, cb;
      if      (s < 1.) { ca = c0; cb = c1; }
      else if (s < 2.) { ca = c1; cb = c2; }
      else if (s < 3.) { ca = c2; cb = c3; }
      else             { ca = c3; cb = c4; }
      return mix(ca, cb, f);
    }

    /* ── Main ────────────────────────────────────────────────────── */
    void main() {
      vec2 uv = gl_FragCoord.xy / u_resolution.xy;
      float aspect = u_resolution.x / u_resolution.y;
      vec2 p = vec2(uv.x * aspect, uv.y);

      /* Animate faster while scrolling */
      float spd = 0.10 + u_speed * 0.14;
      float t   = u_time * spd;

      /* ── Level-1 domain warp ── */
      vec2 q = vec2(
        snoise(p * 1.8 + vec2(0.00, 0.00) + t * 0.40),
        snoise(p * 1.8 + vec2(5.20, 1.30) + t * 0.37)
      );

      /* ── Level-2 domain warp ── */
      vec2 r = vec2(
        snoise(p * 1.6 + 4.2*q + vec2(1.70, 9.20) + t * 0.22),
        snoise(p * 1.6 + 4.2*q + vec2(8.30, 2.80) + t * 0.20)
      );

      /* ── Warped base noise value → [0,1] ── */
      float f = snoise(p * 1.4 + 4.0*r + t * 0.10) * 0.5 + 0.5;

      /* ── Additional detail octaves ── */
      float detail = snoise(p * 5.0  + t * 0.28 + 2.0*q) * 0.18;
      float fine   = snoise(p * 11.0 + t * 0.45)          * 0.07;
      float n = clamp(f + detail + fine, 0., 1.);

      /* ── Base ocean colour ── */
      vec3 color = oceanColor(n);

      /* ── Caustic / shimmer speckles on the peaks ── */
      float shimmer = snoise(p * 18.0 + t * 0.9 + 3.0*r);
      shimmer = pow(max(shimmer, 0.), 4.) * 0.55;
      color += vec3(shimmer * 0.14, shimmer * 0.52, shimmer * 0.48);

      /* ── Slow rolling light bands (subsurface scattering feel) ── */
      float band = snoise(vec2(p.x * 0.5 + t * 0.07, p.y * 1.8)) * 0.5 + 0.5;
      color = mix(color, color * 1.28, band * 0.16);

      /* ── Radial vignette ── */
      vec2  vp   = uv - 0.5;
      float vign = 1.0 - dot(vp, vp) * 1.3;
      color *= clamp(vign, 0., 1.);

      /* ── Soft top-fade so ocean blends into the sky layer ── */
      float topFade = smoothstep(0.0, 0.30, uv.y);
      color *= topFade;

      gl_FragColor = vec4(color, 1.0);
    }
  </script>
</head>
<body>

  <!-- ── Nav (always on top) ─────────────────────────────────────── -->
  <nav class="nav">
    <div class="nav-logo">Ocean Horizon</div>
    <div class="nav-links">
      <a href="#">Explore</a>
      <a href="#">Gallery</a>
      <a href="#">Journey</a>
      <a href="#">Contact</a>
    </div>
  </nav>

  <!-- ── Layer 1 : Sky (fixed background) ────────────────────────── -->
  <div id="sky"></div>

  <!-- ── Layer 2 : Ocean Entity (WebGL canvas, rises on scroll) ──── -->
  <canvas id="ocean"></canvas>

  <!-- ── Layer 3 : Cliffs foreground (fixed, PNG with transparency)  -->
  <div id="cliffs"></div>

  <!-- ── Scroll driver  ──────────────────────────────────────────── -->
  <!--   This block creates the scroll room. The fixed layers react
         to scrollY while this element flows normally in the document. -->
  <div class="scroll-driver">
    <div class="hero-content">
      <h1>Where Sky<br>Meets Sea</h1>
      <p>Discover the endless horizon</p>
      <span class="scroll-hint">
        Scroll to reveal
        <span class="scroll-line"></span>
      </span>
    </div>
  </div>

  <!-- ── Content sections ────────────────────────────────────────── -->
  <main class="content">
    <section class="section-intro">
      <h2>The Endless Horizon</h2>
      <p>Where turquoise waters kiss ancient cliffsides and the wind carries
         the scent of salt and pine. A place where time slows and the soul
         breathes freely.</p>
    </section>

    <div class="card-row">
      <div class="card">
        <div class="card-icon">&#9875;</div>
        <h3>Set Sail</h3>
        <p>Chart a course through pristine waters, guided by the stars and
           the rhythm of the tide.</p>
      </div>
      <div class="card">
        <div class="card-icon">&#9968;</div>
        <h3>Clifftop Trails</h3>
        <p>Wind through ancient forests where wildflowers cling to rocky
           outcrops above the sea.</p>
      </div>
      <div class="card">
        <div class="card-icon">&#9728;</div>
        <h3>Open Skies</h3>
        <p>Watch as golden light dances across the waves, painting the world
           in endless wonder.</p>
      </div>
    </div>

    <button class="cta-btn">Begin the Journey</button>
  </main>

  <footer>
    &copy; 2026 Ocean Horizon &nbsp;&bull;&nbsp; Where the sea calls you home
  </footer>

  <script src="script.js"></script>
</body>
</html>
